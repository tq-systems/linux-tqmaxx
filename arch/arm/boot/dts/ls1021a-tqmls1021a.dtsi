/*
 * Copyright 2013-2014 Freescale Semiconductor, Inc.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 */

#include "ls1021a.dtsi"

/ {
	model = "TQMLS102xA SOM";

	clocks {
		sys_mclk: clock {
			compatible = "fixed-clock";
			#clock-cells = <0>;
			clock-frequency = <24576000>;
		};
	};

	soc {
		qspi: quadspi@1550000 {
			compatible = "fsl,ls1021a-qspi";
			#address-cells = <1>;
			#size-cells = <0>;
			reg = <0x0 0x1550000 0x0 0x10000>,
			      <0x0 0x40000000 0x0 0x4000000>;
			reg-names = "QuadSPI", "QuadSPI-memory";
			interrupts = <GIC_SPI 131 IRQ_TYPE_LEVEL_HIGH>;
			clock-names = "qspi_en", "qspi";
			clocks = <&clockgen 4 0>, <&clockgen 4 0>;
			big-endian;
			amba-base = <0x40000000>;
			status = "okay";

			qflash0: mt25ql512@0 {
				compatible = "micron,n25q512ax3", "cfi-flash";
				#address-cells = <1>;
				#size-cells = <1>;
				spi-max-frequency = <20000000>;
				reg = <0>;

				partitions {
					compatible = "fixed-partitions";
					#address-cells = <1>;
					#size-cells = <1>;

					uboot@0 {
						label = "U-Boot-PBL";
						reg = <0x0 0xe0000>;
					};

					env@e0000 {
						label = "U-Boot Environment";
						reg = <0xe0000 0x10000>;
					};

					dtb@f0000 {
						label = "DTB";
						reg = <0xf0000 0x10000>;
					};

					linux@100000 {
						label = "Linux";
						reg = <0x100000 0x700000>;
					};

					rootfs@800000 {
						label = "RootFS";
						reg = <0x800000 0x3800000>;
					};
				};
			};
		};

		rcpm: rcpm@1ee2000 {
			compatible = "fsl,ls1021a-rcpm", "fsl,qoriq-rcpm-2.1";
			reg = <0x0 0x1ee2000 0x0 0x10000>;
		};

		uqe: uqe@2400000 {
			#address-cells = <1>;
			#size-cells = <1>;
			device_type = "qe";
			compatible = "fsl,qe", "simple-bus";
			ranges = <0x0 0x0 0x2400000 0x40000>;
			reg = <0x0 0x2400000 0x0 0x480>;
			brg-frequency = <100000000>;
			bus-frequency = <200000000>;

			fsl,qe-num-riscs = <1>;
			fsl,qe-num-snums = <28>;

			qeic: qeic@80 {
				compatible = "fsl,qe-ic";
				reg = <0x80 0x80>;
				#address-cells = <0>;
				interrupt-controller;
				#interrupt-cells = <1>;
				interrupts = <0 109 0x04 0 109 0x04>;
			};

			si1: si@700 {
				#address-cells = <1>;
				#size-cells = <0>;
				compatible = "fsl,qe-si";
				reg = <0x700 0x80>;
			};

			siram1: siram@1000 {
				#address-cells = <1>;
				#size-cells = <1>;
				compatible = "fsl,qe-siram";
				reg = <0x1000 0x800>;
			};

			ucc@2000 {
				cell-index = <1>;
				reg = <0x2000 0x200>;
				interrupts = <32>;
				interrupt-parent = <&qeic>;
			};

			ucc@2200 {
				cell-index = <3>;
				reg = <0x2200 0x200>;
				interrupts = <34>;
				interrupt-parent = <&qeic>;
			};

			muram@10000 {
				#address-cells = <1>;
				#size-cells = <1>;
				compatible = "fsl,qe-muram", "fsl,cpm-muram";
				ranges = <0x0 0x10000 0x6000>;

				data-only@0 {
					compatible = "fsl,qe-muram-data",
					"fsl,cpm-muram-data";
					reg = <0x0 0x6000>;
				};
			};
		};

		pwm3: ftm@2a00000 {
			compatible = "fsl,vf610-ftm-pwm";
			#pwm-cells = <3>;
			reg = <0x0 0x2a00000 0x0 0x10000>;
			interrupts = <GIC_SPI 121 IRQ_TYPE_LEVEL_HIGH>;
			clock-names = "ftm_sys", "ftm_ext",
				      "ftm_fix", "ftm_cnt_clk_en";
			clocks = <&clockgen 4 1>, <&clockgen 4 1>,
				 <&clockgen 4 1>, <&clockgen 4 1>;
			big-endian;
			status = "disabled";
		};

		pwm6: ftm@2a30000 {
			compatible = "fsl,vf610-ftm-pwm";
			#pwm-cells = <3>;
			reg = <0x0 0x2a30000 0x0 0x10000>;
			interrupts = <GIC_SPI 123 IRQ_TYPE_LEVEL_HIGH>;
			clock-names = "ftm_sys", "ftm_ext",
				      "ftm_fix", "ftm_cnt_clk_en";
			clocks = <&clockgen 4 1>, <&clockgen 4 1>,
				 <&clockgen 4 1>, <&clockgen 4 1>;
			big-endian;
			status = "disabled";
		};

		pwm7: ftm@2a40000 {
			compatible = "fsl,vf610-ftm-pwm";
			#pwm-cells = <3>;
			reg = <0x0 0x2a40000 0x0 0x10000>;
			interrupts = <GIC_SPI 124 IRQ_TYPE_LEVEL_HIGH>;
			clock-names = "ftm_sys", "ftm_ext",
				      "ftm_fix", "ftm_cnt_clk_en";
			clocks = <&clockgen 4 1>, <&clockgen 4 1>,
				 <&clockgen 4 1>, <&clockgen 4 1>;
			big-endian;
			status = "disabled";
		};
	};

	regulators {
		compatible = "simple-bus";
		#address-cells = <1>;
		#size-cells = <0>;

		reg_3p3v_som: regulator@0 {
			compatible = "regulator-fixed";
			reg = <0>;
			regulator-name = "3P3V_SOM";
			regulator-min-microvolt = <3300000>;
			regulator-max-microvolt = <3300000>;
			regulator-always-on;
		};
	};

	timer {
		always-on;
	};
};

&esdhc {
	compatible = "fsl,esdhc", "fsl,ls1021a-esdhc";
	/* e-MMC over 8 data lines */
	bus-width = <8>;
	status = "okay";
};

&i2c0 {
	status = "okay";

	pmic0: mc34vr500@08 {
		reg = <0x08>;
		status = "disabled";
	};

	sensor0: sa56004@4c {
		compatible = "nxp,sa56004";
		reg = <0x4c>;
		vcc-supply = <&reg_3p3v_som>;
		status = "okay";
	};

	pmc0: pmc@11 {
		reg = <0x11>;
		interrupts = <GIC_SPI 165 IRQ_TYPE_LEVEL_HIGH>;
		status = "disabled";
	};

	supervisor0: adm1069@4f {
		reg = <0x4f>;
		status = "disabled";
	};

	eeprom0: 24c64@54 {
		compatible = "atmel,24c64";
		reg = <0x54>;
		pagesize = <32>;
		status = "okay";
	};

	rtc: pcf85063@51 {
		compatible = "nxp,pcf85063";
		nxp,quartz_load = "12.5pF";
		nxp,offset = <0x80>;
		reg = <0x51>;
		status = "okay";
	};
};

&mdio0 {
	tbi1: tbi-phy@8 {
		reg = <0x8>;
		device_type = "tbi-phy";
	};
};

&scfg {
	reg = <0x0 0x1570000 0x0 0x0e00>;
};

&tmu {
	fsl,tmu-range = <0xb0000 0x9002a 0x6004c 0x30062>;
	fsl,tmu-calibration = <
		0x00000000 0x00000026
		0x00000001 0x0000002d
		0x00000002 0x00000032
		0x00000003 0x00000039
		0x00000004 0x0000003f
		0x00000005 0x00000046
		0x00000006 0x0000004d
		0x00000007 0x00000054
		0x00000008 0x0000005a
		0x00000009 0x00000061
		0x0000000a 0x0000006a
		0x0000000b 0x00000071

		0x00010000 0x00000025
		0x00010001 0x0000002c
		0x00010002 0x00000035
		0x00010003 0x0000003d
		0x00010004 0x00000045
		0x00010005 0x0000004e
		0x00010006 0x00000057
		0x00010007 0x00000061
		0x00010008 0x0000006b
		0x00010009 0x00000076

		0x00020000 0x00000029
		0x00020001 0x00000033
		0x00020002 0x0000003d
		0x00020003 0x00000049
		0x00020004 0x00000056
		0x00020005 0x00000061
		0x00020006 0x0000006d

		0x00030000 0x00000021
		0x00030001 0x0000002a
		0x00030002 0x0000003c
		0x00030003 0x0000004e
	>;
};
